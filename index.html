<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Friend Group Jeopardy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    /* === GLOBAL STYLE / BACKGROUND === */
    :root {
      --jeopardy-blue: #001f3f;
      --jeopardy-blue-light: #0f3c7a;
      --jeopardy-gold: #facc15;
      --jeopardy-red: #ef4444;
      --jeopardy-bg: radial-gradient(circle at top, #023e8a, #020617 55%, #000 100%);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--jeopardy-bg);
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 12px;
      overflow-x: hidden;
    }

    /* === FUN HEADER === */
    h1 {
      margin: 8px 0 4px;
      text-align: center;
      letter-spacing: 0.35em;
      text-transform: uppercase;
      font-weight: 800;
      font-size: clamp(1.6rem, 3vw, 2.4rem);
      text-shadow: 0 0 10px rgba(250, 204, 21, 0.7),
                   0 0 30px rgba(59, 130, 246, 0.7);
      animation: glow 3s ease-in-out infinite alternate;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 5px rgba(250, 204, 21, 0.5),
                     0 0 12px rgba(59, 130, 246, 0.4);
      }
      to {
        text-shadow: 0 0 15px rgba(250, 204, 21, 0.9),
                     0 0 40px rgba(59, 130, 246, 0.9);
      }
    }

    .subtitle {
      margin-bottom: 10px;
      font-size: 0.9rem;
      opacity: 0.9;
      text-align: center;
    }

    /* === CONTROLS BAR === */
    #controls {
      margin: 4px 0 14px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }

    button {
      cursor: pointer;
      border-radius: 999px;
      border: none;
      padding: 8px 16px;
      font-size: 0.85rem;
      font-weight: 600;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      transition: transform 0.08s ease, box-shadow 0.1s ease, filter 0.1s ease;
    }

    button:active {
      transform: scale(0.96);
      box-shadow: 0 0 0 rgba(0,0,0,0);
      filter: brightness(0.9);
    }

    .btn-secondary {
      background: #1f2937;
      color: #e5e7eb;
      box-shadow: 0 0 12px rgba(15, 118, 110, 0.4);
    }

    .btn-primary {
      background: var(--jeopardy-gold);
      color: #111827;
      box-shadow: 0 0 12px rgba(250, 204, 21, 0.7);
    }

    .btn-danger {
      background: var(--jeopardy-red);
      color: #f9fafb;
      box-shadow: 0 0 12px rgba(248, 113, 113, 0.7);
    }

    /* === BOARD LAYOUT === */
    #board-wrapper {
      position: relative;
      max-width: 980px;
      width: 100%;
      padding: 10px;
      border-radius: 18px;
      background: radial-gradient(circle at top, rgba(15,23,42,0.95), rgba(0,0,0,0.95));
      box-shadow: 0 18px 45px rgba(0,0,0,0.7);
      overflow: hidden;
    }

    #board-wrapper::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at top left, rgba(56,189,248,0.15), transparent 60%),
        radial-gradient(circle at bottom right, rgba(250,204,21,0.12), transparent 60%);
      opacity: 0.7;
      pointer-events: none;
    }

    #board {
      position: relative;
      display: grid;
      grid-template-columns: repeat(5, minmax(120px, 1fr));
      gap: 6px;
      z-index: 1;
    }

    .category, .cell {
      border-radius: 6px;
      text-align: center;
      padding: 12px 6px;
      box-sizing: border-box;
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    .category {
      background: linear-gradient(to bottom, #1d4ed8, #1e293b);
      font-weight: 700;
      text-transform: uppercase;
      font-size: 0.85rem;
      letter-spacing: 0.06em;
      box-shadow: 0 6px 10px rgba(15, 23, 42, 0.8);
    }

    .cell {
      background: radial-gradient(circle at top, #1d4ed8, #020617);
      cursor: pointer;
      font-size: 1.4rem;
      font-weight: 800;
      color: var(--jeopardy-gold);
      text-shadow: 0 0 5px rgba(250, 204, 21, 0.7);
      transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease,
                  filter 0.12s ease;
      user-select: none;
      position: relative;
      overflow: hidden;
    }

    .cell::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(130deg, transparent 0%, rgba(255,255,255,0.25) 40%, transparent 80%);
      opacity: 0;
      transform: translateX(-100%);
      transition: transform 0.4s ease, opacity 0.3s ease;
      pointer-events: none;
    }

    .cell:hover::after {
      opacity: 1;
      transform: translateX(100%);
    }

    .cell:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 10px 18px rgba(15, 23, 42, 0.9);
      filter: brightness(1.1);
    }

    .cell.used {
      background: #020617;
      color: #4b5563;
      cursor: default;
      text-decoration: line-through;
      text-shadow: none;
      filter: grayscale(0.4);
    }

    .cell.daily-double::before {
      content: "★";
      position: absolute;
      top: 4px;
      left: 6px;
      font-size: 0.8rem;
      color: rgba(251, 191, 36, 0.9);
      text-shadow: 0 0 8px rgba(251, 191, 36, 0.8);
    }

    /* === MODAL === */
    #modal-backdrop {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, rgba(15,23,42,0.95), rgba(0,0,0,0.97));
      display: none;
      justify-content: center;
      align-items: center;
      padding: 16px;
      box-sizing: border-box;
      z-index: 20;
      animation: fadeIn 0.2s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(1.02); }
      to { opacity: 1; transform: scale(1); }
    }

    #modal {
      background: radial-gradient(circle at top, #020617, #020617 40%, #020617);
      border-radius: 16px;
      max-width: 720px;
      width: 100%;
      padding: 22px 20px 18px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.9);
      border: 1px solid rgba(148, 163, 184, 0.35);
      position: relative;
      overflow: hidden;
    }

    #modal::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at top left, rgba(59,130,246,0.2), transparent 65%),
        radial-gradient(circle at bottom right, rgba(250,204,21,0.18), transparent 60%);
      opacity: 0.8;
      pointer-events: none;
    }

    #modal-inner {
      position: relative;
      z-index: 1;
    }

    #modal-category {
      font-size: 0.85rem;
      text-transform: uppercase;
      opacity: 0.8;
      margin-bottom: 4px;
      letter-spacing: 0.1em;
    }

    #modal-value {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 14px;
      color: var(--jeopardy-gold);
    }

    #modal-question {
      font-size: 1.5rem;
      margin-bottom: 18px;
      line-height: 1.35;
      text-align: center;
    }

    #modal-answer {
      font-size: 1.3rem;
      margin-bottom: 16px;
      display: none;
      color: var(--jeopardy-gold);
      text-align: center;
      animation: answerPop 0.32s ease-out;
    }

    @keyframes answerPop {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    #modal-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    #modal-buttons {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    /* === TIMER === */
    #timer-wrapper {
      display: flex;
      flex-direction: column;
      gap: 4px;
      min-width: 120px;
    }

    #timer-label {
      font-size: 0.8rem;
      opacity: 0.85;
    }

    #timer-bar {
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: #020617;
      overflow: hidden;
      border: 1px solid rgba(148,163,184,0.5);
    }

    #timer-fill {
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, #22c55e, #facc15, #ef4444);
      transform-origin: left center;
      transform: scaleX(0);
      transition: transform 0.1s linear;
    }

    /* === SMALL SCREEN ADJUSTMENTS === */
    @media (max-width: 800px) {
      #board {
        grid-template-columns: repeat(3, minmax(90px, 1fr));
      }
      .category {
        font-size: 0.75rem;
      }
      .cell {
        font-size: 1.1rem;
        padding: 10px 4px;
      }
      #modal-question {
        font-size: 1.2rem;
      }
      #modal-answer {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <h1>JEOPARDY</h1>
  <div class="subtitle">
    Click a tile to reveal the clue. Spacebar = Show/Hide answer, Esc = Close.
  </div>

  <div id="controls">
    <button class="btn-secondary" id="reset-board">Reset Board</button>
    <button class="btn-secondary" id="shuffle-board">Shuffle Values</button>
    <button class="btn-primary" id="toggle-sound">Sound: On</button>
  </div>

  <div id="board-wrapper">
    <div id="board"></div>
  </div>

  <!-- MODAL -->
  <div id="modal-backdrop">
    <div id="modal">
      <div id="modal-inner">
        <div id="modal-category"></div>
        <div id="modal-value"></div>
        <div id="modal-question"></div>
        <div id="modal-answer"></div>
        <div id="modal-footer">
          <div id="timer-wrapper">
            <div id="timer-label">Timer</div>
            <div id="timer-bar">
              <div id="timer-fill"></div>
            </div>
          </div>
          <div id="modal-buttons">
            <button class="btn-secondary" id="toggle-answer">Show Answer (Space)</button>
            <button class="btn-danger" id="close-modal">Close (Esc)</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // === STEP 1: EDIT YOUR GAME QUESTIONS HERE ===
    const gameData = [
      {
        category: "Inside Jokes",
        clues: [
          { value: 100, question: "What phrase did Alex say at the beach that we still tease him about?", answer: "“I could’ve been a lifeguard, but…”" },
          { value: 200, question: "Who fell down the stairs at Taylor’s party?", answer: "Sam" },
          { value: 300, question: "What song did we scream-sing in the Uber after the concert?", answer: "Mr. Brightside" },
          { value: 400, question: "Which friend always forgets their wallet?", answer: "Chris" },
          { value: 500, question: "What’s the name of the cursed group chat we never use anymore?", answer: "Your cursed group chat name" }
        ]
      },
      {
        category: "Travel Stories",
        clues: [
          { value: 100, question: "Where did we go for our first group trip?", answer: "Asheville" },
          { value: 200, question: "Who missed their flight on the Vegas trip?", answer: "Jordan" },
          { value: 300, question: "What food did we eat three times in one day in New York?", answer: "Pizza" },
          { value: 400, question: "Which city did we get stuck in during a snowstorm?", answer: "Boston" },
          { value: 500, question: "What landmark did we never actually make it to, despite planning to?", answer: "Your answer" }
        ]
      },
      {
        category: "Relationships",
        clues: [
          { value: 100, question: "Who started dating after meeting at our game night?", answer: "Jamie & Alex" },
          { value: 200, question: "Which couple has the best combined Halloween costumes?", answer: "You decide" },
          { value: 300, question: "Who had the most chaotic first date story?", answer: "You decide" },
          { value: 400, question: "Who had their first kiss at the lake house?", answer: "You decide" },
          { value: 500, question: "Which friend has sworn off dating apps more than twice?", answer: "You decide" }
        ]
      },
      {
        category: "Party Legends",
        clues: [
          { value: 100, question: "Who fell asleep on the kitchen floor?", answer: "You decide" },
          { value: 200, question: "What drink did we swear to never buy again?", answer: "Fireball (probably)" },
          { value: 300, question: "Who tried to order 100 chicken nuggets at 3 AM?", answer: "You decide" },
          { value: 400, question: "At whose house did the infamous 'Uno Incident' happen?", answer: "You decide" },
          { value: 500, question: "What did we accidentally set on fire?", answer: "You decide" }
        ]
      },
      {
        category: "Random Trivia",
        clues: [
          { value: 100, question: "Who’s the tallest person in the friend group?", answer: "You decide" },
          { value: 200, question: "Which friend has the weirdest coffee order?", answer: "You decide" },
          { value: 300, question: "Who owns the most board games?", answer: "You decide" },
          { value: 400, question: "Which friend is always late?", answer: "You decide" },
          { value: 500, question: "Who is most likely to become TikTok famous?", answer: "You decide" }
        ]
      }
    ];

    // === STEP 2: BASIC SETTINGS (YOU CAN TWEAK THESE) ===
    const settings = {
      timerSeconds: 15,      // seconds for the countdown per clue
      enableDailyDouble: true,
      soundEnabledByDefault: true
    };

    // === SMALL HELPER: SIMPLE BEEP SOUNDS USING WEB AUDIO API ===
    class SoundFX {
      constructor() {
        this.enabled = settings.soundEnabledByDefault;
        this.ctx = null;
      }

      ensureContext() {
        if (!this.ctx) {
          const AC = window.AudioContext || window.webkitAudioContext;
          if (AC) this.ctx = new AC();
        }
      }

      playBeep({ frequency = 440, duration = 0.12, type = "square", volume = 0.2 } = {}) {
        if (!this.enabled) return;
        this.ensureContext();
        if (!this.ctx) return;

        const ctx = this.ctx;
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.frequency.value = frequency;
        osc.type = type;
        gain.gain.value = volume;
        osc.connect(gain);
        gain.connect(ctx.destination);

        const now = ctx.currentTime;
        osc.start(now);
        osc.stop(now + duration);
      }

      openClue() {
        this.playBeep({ frequency: 660, duration: 0.1, type: "square" });
      }

      showAnswer() {
        this.playBeep({ frequency: 520, duration: 0.1, type: "sine" });
      }

      dailyDouble() {
        this.playBeep({ frequency: 440, duration: 0.12, type: "square" });
        setTimeout(() => this.playBeep({ frequency: 660, duration: 0.12, type: "square" }), 130);
      }

      toggle() {
        this.enabled = !this.enabled;
      }
    }

    const sfx = new SoundFX();

    // === TIMER HANDLER ===
    class ClueTimer {
      constructor(seconds, fillEl) {
        this.seconds = seconds;
        this.fillEl = fillEl;
        this.startTime = null;
        this.rafId = null;
      }

      start() {
        if (!this.fillEl) return;
        this.startTime = performance.now();
        this.fillEl.style.transform = "scaleX(1)";
        const totalMs = this.seconds * 1000;

        const tick = (now) => {
          const elapsed = now - this.startTime;
          const remainingRatio = Math.max(0, 1 - elapsed / totalMs);
          this.fillEl.style.transform = `scaleX(${remainingRatio})`;
          if (remainingRatio > 0) {
            this.rafId = requestAnimationFrame(tick);
          } else {
            this.stop();
            this.fillEl.style.transform = "scaleX(0)";
          }
        };

        this.rafId = requestAnimationFrame(tick);
      }

      stop() {
        if (this.rafId) cancelAnimationFrame(this.rafId);
        this.rafId = null;
        if (this.fillEl) {
          this.fillEl.style.transform = "scaleX(0)";
        }
      }
    }

    // === MAIN GAME LOGIC ===
    const JeopardyGame = (() => {
      const boardEl = document.getElementById("board");
      const modalBackdrop = document.getElementById("modal-backdrop");
      const modalCategory = document.getElementById("modal-category");
      const modalValue = document.getElementById("modal-value");
      const modalQuestion = document.getElementById("modal-question");
      const modalAnswer = document.getElementById("modal-answer");
      const toggleAnswerBtn = document.getElementById("toggle-answer");
      const closeModalBtn = document.getElementById("close-modal");
      const resetBoardBtn = document.getElementById("reset-board");
      const shuffleBoardBtn = document.getElementById("shuffle-board");
      const toggleSoundBtn = document.getElementById("toggle-sound");
      const timerFillEl = document.getElementById("timer-fill");

      let currentCell = null;
      let currentClue = null;
      let answerVisible = false;
      let timer = new ClueTimer(settings.timerSeconds, timerFillEl);
      let dailyDoubleCellKey = null;

      const stateKey = "friendJeopardy_usedCells_v1";

      function cellKey(colIndex, rowIndex) {
        return `${colIndex}-${rowIndex}`;
      }

      function saveUsedCells() {
        const used = Array.from(document.querySelectorAll(".cell.used")).map(
          c => cellKey(c.dataset.col, c.dataset.row)
        );
        localStorage.setItem(stateKey, JSON.stringify(used));
      }

      function loadUsedCells() {
        try {
          const text = localStorage.getItem(stateKey);
          if (!text) return new Set();
          return new Set(JSON.parse(text));
        } catch {
          return new Set();
        }
      }

      function pickDailyDouble(cells) {
        if (!settings.enableDailyDouble || cells.length === 0) {
          dailyDoubleCellKey = null;
          return;
        }
        const index = Math.floor(Math.random() * cells.length);
        dailyDoubleCellKey = cellKey(cells[index].dataset.col, cells[index].dataset.row);
        cells[index].classList.add("daily-double");
      }

      function renderBoard({ shuffle = false } = {}) {
        const usedCells = loadUsedCells();
        boardEl.innerHTML = "";

        // Category headers
        gameData.forEach(col => {
          const catDiv = document.createElement("div");
          catDiv.className = "category";
          catDiv.textContent = col.category;
          boardEl.appendChild(catDiv);
        });

        // Optionally shuffle the values inside each category
        const dataToRender = shuffle
          ? gameData.map(col => ({
              ...col,
              clues: [...col.clues].sort(() => Math.random() - 0.5)
            }))
          : gameData;

        const maxClues = Math.max(...dataToRender.map(c => c.clues.length));
        const clueCells = [];

        for (let row = 0; row < maxClues; row++) {
          dataToRender.forEach((col, colIndex) => {
            const clue = col.clues[row];
            const cell = document.createElement("div");
            cell.className = "cell";
            cell.dataset.col = colIndex;
            cell.dataset.row = row;

            if (clue) {
              cell.textContent = `$${clue.value}`;
              const key = cellKey(colIndex, row);
              if (usedCells.has(key)) {
                cell.classList.add("used");
              }
              cell.addEventListener("click", () => openClue(cell, clue, col.category));
              clueCells.push(cell);
            } else {
              cell.textContent = "";
              cell.style.visibility = "hidden";
            }
            boardEl.appendChild(cell);
          });
        }

        pickDailyDouble(clueCells);
      }

      function openClue(cell, clue, categoryName) {
        if (cell.classList.contains("used")) return;

        currentCell = cell;
        currentClue = clue;
        answerVisible = false;
        modalAnswer.style.display = "none";
        toggleAnswerBtn.textContent = "Show Answer (Space)";

        modalCategory.textContent = categoryName;
        modalValue.textContent = `$${clue.value}`;
        modalQuestion.textContent = clue.question;
        modalAnswer.textContent = clue.answer;

        modalBackdrop.style.display = "flex";
        timer.stop();
        timer = new ClueTimer(settings.timerSeconds, timerFillEl);
        timer.start();

        const key = cellKey(cell.dataset.col, cell.dataset.row);
        if (settings.enableDailyDouble && key === dailyDoubleCellKey) {
          modalCategory.textContent += " — DAILY DOUBLE!";
          sfx.dailyDouble();
        } else {
          sfx.openClue();
        }
      }

      function toggleAnswer() {
        if (!currentClue) return;
        answerVisible = !answerVisible;
        modalAnswer.style.display = answerVisible ? "block" : "none";
        toggleAnswerBtn.textContent = answerVisible ? "Hide Answer (Space)" : "Show Answer (Space)";
        if (answerVisible) sfx.showAnswer();
      }

      function closeModal() {
        if (!currentCell) {
          modalBackdrop.style.display = "none";
          return;
        }
        modalBackdrop.style.display = "none";
        currentCell.classList.add("used");
        saveUsedCells();
        timer.stop();
        currentCell = null;
        currentClue = null;
      }

      function resetBoard() {
        document.querySelectorAll(".cell").forEach(c => c.classList.remove("used", "daily-double"));
        localStorage.removeItem(stateKey);
        renderBoard();
      }

      function shuffleBoard() {
        localStorage.removeItem(stateKey);
        renderBoard({ shuffle: true });
      }

      function toggleSound() {
        sfx.toggle();
        toggleSoundBtn.textContent = `Sound: ${sfx.enabled ? "On" : "Off"}`;
      }

      function handleKeydown(e) {
        if (modalBackdrop.style.display !== "flex") return;
        if (e.code === "Space") {
          e.preventDefault();
          toggleAnswer();
        } else if (e.key === "Escape") {
          closeModal();
        }
      }

      function init() {
        renderBoard();
        resetBoardBtn.addEventListener("click", resetBoard);
        shuffleBoardBtn.addEventListener("click", shuffleBoard);
        toggleAnswerBtn.addEventListener("click", toggleAnswer);
        closeModalBtn.addEventListener("click", closeModal);
        modalBackdrop.addEventListener("click", (e) => {
          if (e.target === modalBackdrop) {
            closeModal();
          }
        });
        toggleSoundBtn.addEventListener("click", toggleSound);
        document.addEventListener("keydown", handleKeydown);
        toggleSoundBtn.textContent = `Sound: ${sfx.enabled ? "On" : "Off"}`;
      }

      return { init };
    })();

    document.addEventListener("DOMContentLoaded", JeopardyGame.init);
  </script>
</body>
</html>
